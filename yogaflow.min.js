function allow_drop(e){e.preventDefault()}function get_dropped_asana(e){return document.getElementById(e.dataTransfer.getData("asana_id"))}function set_dropped_asana(e,t){e.dataTransfer.setData("asana_id",e.target.id)}function show_edit(){document.getElementById("trash").className="";document.getElementById("flow-window").className="";document.getElementById("asanas").className="";document.getElementById("edit-button").style.display="none";document.getElementById("stop-editing").className=""}function hide_edit(){document.getElementById("trash").className="hidden";document.getElementById("asanas").className="hidden";document.getElementById("edit-button").style.display="block";document.getElementById("stop-editing").className="hidden"}function hide_instructions(){var e=document.querySelectorAll(".instructions");for(i=0,len=e.length;i<len;i++){e[i].style.display="none"}document.getElementById("flow").className=""}var Asana={create:function(e){asana=document.createElement("li");asana.innerHTML=e;asana.title=e;asana.draggable=true;return asana},hover_begin:function(e){e.target.style.opacity=.5},hover_end:function(e){e.target.style.opacity=1},reorder_drop:function(e){e.stopPropagation();e.target.parentNode.insertBefore(Asana.prepare_for_flow(get_dropped_asana(e)),e.target);e.target.style.opacity=1;Hash.rebuild()},flow_drop:function(e){return function(t){var n=get_dropped_asana(t);e.appendChild(Asana.prepare_for_flow(n));hide_instructions();Hash.rebuild()}},trash_drop:function(e){return function(t){e.removeChild(get_dropped_asana(t));Hash.rebuild()}},drag_start:function(e){set_dropped_asana(e);e.target.style.opacity=.5},drag_end:function(e){e.target.style.opacity=1},prepare_for_flow:function(e){if(e.parentNode!=null&&e.parentNode.id!="flow"){e=e.cloneNode(true);e.id="asana"+Date.now()}e.ondragstart=Asana.drag_start;e.ondragend=Asana.drag_end;e.ondragenter=Asana.hover_begin;e.ondragleave=Asana.hover_end;e.ondrop=Asana.reorder_drop;e.ondragover=allow_drop;return e}};var Hash={rebuild:function(){var e="";var t=document.getElementById("flow").children;for(i=0,len=t.length;i<len;i++){e+=Hash.encode_index(t[i].getAttribute("data-asana"))}window.location.hash=$.base64.encode(e)},encode_index:function(e){return String.fromCharCode(parseInt(e))},decode_index:function(e){return e.charCodeAt(0)}};var Setup={asanas:function(e,t){for(i=0,len=e.length;i<len;i++){asana=Asana.create(e[i]);asana.ondrag=Asana.drag_end;asana.ondragstart=Asana.drag_start;asana.ondragend=Asana.drag_end;asana.id="asana"+i;asana.setAttribute("data-asana",i);t.appendChild(asana)}},flow:function(e,t,n){var r;var s;var t=$.base64.decode(t.slice(1));for(i=0,len=t.length;i<len;i++){s=Hash.decode_index(t[i]);r=Asana.create(n[s]);r.id="flow-asana"+i;r.setAttribute("data-asana",s);e.appendChild(Asana.prepare_for_flow(r))}}};window.onload=function(){var e=window.location.hash;var t=document.getElementById("trash");var n=document.getElementById("flow-window");var r=document.getElementById("flow");var s=document.getElementById("asanas");var o=document.getElementById("edit-button");var u=["Angle","Arm-Pressing Posture","Auspicious","Balance Posture","Bed","Belly-Revolving Posture","Bharadvaja's Pose Twist","Big Toe","Bird of Paradise","Boat","Both Feet Behind Head","Bound Angle","Bow","Bridge","Camel","Cat ","Chair","Child's Pose","Circle","Cobbler's Pose","Cobra","Cockerel","Compass","Concealed Posture","Corpse","Cow Face","Cow","Crane","Crescent Lunge","Crescent Moon","Crocodile","Crow","Dolphin Plank","Dolphin","Dolphin Push-Ups","Down Dog Split","Downward-Facing Dog","Downward-Facing Tree","Dragonfly","Eagle","Ear Pressure","Ear-Pressing","Easy","Eight-Angle","Elephant's Pose Trunk","Equal Standing","Eternal One's Pose","Extended Hand-To-Big-Toe","Extended Puppy","Extended Side Angle","Extended Side Angle Variations","Extended Triangle","Eye of the Needle","Feathered Peacock","Fetus","Fire Log","Firefly","Fish","Flying Crow","Foot Behind Head","Forearm Stand","Four-Limbed Staff","Frog","Full Boat","Garland","Gate","Goddess","Half Bear","Half Boat Posture","Half Forward Bend","Half Frog","Half Lord of the Fishes","Half Lotus","Half Moon","Half Wheel","Hands and Knees Balance","Handstand","Happy Baby","Head Stand","Head to Knee","Head-to-Knee Forward Bend","Headstand","Hero","Heron","High Lunge","High Lunge Variation","Horse","Intense Side Stretch","Inverted Tortoise","King Dancer","King Pigeon","Knee to Ankle","Knees, Chest, and Chin","Legs-Up-the-Wall","Lion","Little Thunderbolt","Lizard","Locust","Lord Of the Fishes","Lord Of the Dance","Lotus","Low Lunge","Lunge","Lunge With a Twist","Marichi's Pose","Monkey","Mountain","Noose","Noose","One Legged Arm Balance","One Legged Dedicated to the Sage Koundinya II","One Legged Supported Headstand","One-Legged King Pigeon","One-Legged King Pigeon II","Open Angle","Peacock","Pelvic Tilts","Pendant","Perfect","Pigeon","Plank","Plow","Pose Dedicated to the Sage Koundinya I","Pose Dedicated to the Sage Koundinya II","Pose Dedicated to the Sage Marichi I","Prosperous","Pyramid","Rabbit","Raised Hands","Reclining Big Toe","Reclining Bound Angle","Reclining Hero","Reverse Warrior","Revolved Half Moon","Revolved Head-to-Knee","Revolved Side Angle","Revolved Triangle","Royal Pigeon","Scale","Scorpion","Seated Forward Bend","Seated Wide Legged Straddle","Shoulder Stand","Shoulder-Pressing","Side Crane","Side Crow","Side Plank","Side-Reclining Leg Lift","Sitting Down","Sleeping Vishnu","Sphinx","Staff","Standing Big Toe","Standing Forward Bend","Standing Half Forward Bend","Standing Split","Standing Straddle Forward Bend","Straight Angle","Sugarcane","Supine Spinal Twist","Supported Headstand","Supported Shoulderstand","The Abdominal Lock","The Great Seal Posture","The Liberated","Thunderbolt","Tortoise","Tree","Triangle","Tripod Headstand","Twisted One Legged Arm Balance","Two-Legged Inverted Staff","Unsupported Shoulder Stand","Upward Bow","Upward Facing Dog","Upward Facing Two-Foot Staff ","Upward Lotus","Upward Plank","Upward Salute","Upward-Facing Dog","Warrior I","Warrior II","Warrior III","Wheel","Wide-Angle Seated Forward Bend","Wide-Legged Forward Bend","Wild Thing"];if(s.innerHTML==""){Setup.asanas(u,s)}else{for(i=0,len=s.children.length;i<len;i++){asana=s.children[i];asana.ondrag=Asana.drag_end;asana.ondragstart=Asana.drag_start;asana.ondragend=Asana.drag_end}}if(e.length>0){Setup.flow(r,e,u);o.style.display="block";hide_instructions();document.getElementById("flow-window").className=""}else{show_edit();s.className=""}o.onclick=show_edit;t.ondragover=allow_drop;t.ondrop=Asana.trash_drop(r);n.ondragover=allow_drop;n.ondrop=Asana.flow_drop(r);document.getElementById("stop-editing").onclick=hide_edit;$("#flow-window").blurjs({source:"#background-loader",radius:20,overlay:"rgba(0,51,51,0.2)"})}
